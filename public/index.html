<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Codr</title>
        <link rel=StyleSheet href="/stylesheets/index.css" type="text/css" />        
        <link href='http://fonts.googleapis.com/css?family=Sanchez' rel='stylesheet' type='text/css'>
    </head>
    <body>
        
        <script type="text/javascript">
            // TODO: Get rid of globals.
            var IS_NEW_DOCUMENT = window.location.pathname === '/';
            var IS_SNAPSHOT = /^\/v\//.test(window.location.pathname);
            if (IS_NEW_DOCUMENT) // New document.
                document.body.className = "home";
            if (IS_SNAPSHOT)
                document.body.className += " snapshot"
        </script>

        <div id="home">
            <div id="home-content">
                <h3 class="logo">codr<span class="io">.io</span></h3>
                <div id="modes"></div>
            </div>
        </div>
        
        <div id="workspace" class="">
            
            <div id="snapshot-notify-bar">
                <div>This file is readonly. You can fork this file to create an editable copy.</div>
            </div>

            <div id="workspace-main">
                
                <div id="toolbar-top">
                    
                    <!-- Logo Icon-->
                    <a id="toolbar-logo" href="http://codr.io/">
                        <span class="icon-cloud left-icon"></span>
                        <span class="icon-code left-icon"></span>
                    </a>
                    <div class="divider"></div>
                    
                    <!-- Title Toolbar Item -->
                    <div id="toolbar-item-title" class="toolbar-item">
                        <div class="toolbar-item-btn">
                            <div class="toolbar-item-caption">Title</div>
                            <div class="toolbar-item-selection">Loading...</div>
                        </div>
                        <div class="toolbar-dropdown-top-border"></div>
                        <div class="toolbar-dropdown">
                            <div id="title-message" class="edit-mode-message">
                                Changes not allowed in read-only files
                            </div>
                            <input class="toolbar-input" type="text" id="title-input"></input>
                            <div class="horizontal-divider"></div>
                            <button id="title-save">Save</button>
                            <div class="hidden-focusable">
                                <a href="javascript:void(0)">#</a>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    
                    <!-- Mode (Language) Toolbar Item -->
                    <div id="toolbar-item-mode" class="toolbar-item">
                        <div class="toolbar-item-btn">
                            <div class="toolbar-item-caption">Language</div>
                            <div class="toolbar-item-selection">Loading...</div>
                        </div>
                        <div class="toolbar-dropdown-top-border"></div>
                        <div class="toolbar-dropdown">
                            <div id="mode-message" class="edit-mode-message">
                                Changes not allowed in read-only files
                            </div>
                            <div id="mode-menu"></div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div id="html-tools-btn">
                        HTML Tools <span class="icon-angle-down"></span><span class="icon-angle-up"></span>
                    </div>
                    
                    <!-- Num Viewing Box-->
                    <div id="toolbar-content-right">
                        <div class="divider"></div>
                        <div id="num-viewing-box">
                            <div id="num-viewing-caption" class="toolbar-item-caption">Viewing</div>
                            <div class="horizontal-divider"></div>
                            <div id="num-viewing"></div>
                        </div>
                    </div>
                </div>
                <div id="toolbar-left">
                    
                    <!-- Chat Toolbar Item -->
                    <div id="toolbar-item-chat" class="toolbar-item" title="Chat">
                        <div class="toolbar-item-btn">
                            <span class="icon-comments left-icon"></span>
                            <div id="chat-unread-count" style="display: none;"></div>
                        </div>
                        <div class="toolbar-dropdown-left-border"></div>
                        <div class="toolbar-dropdown identify" id="chat">
                            <div id="chat-identify-wrapper">
                                Please Identify Yourself:
                                <input class="toolbar-input" type="text" id="chat-identify" />
                                <button id="chat-identify-ok-button">OK, Enter Chat</button>
                                <div id="chat-identify-error-message"></div>
                            </div>
                            <div id="chat-main">
                                <div id="chat-history" class="selectable" tabindex="1"></div>
                                <div id="chat-typing">
                                    <b>Typing: </b><span id="chat-typing-names"></span>
                                </div>
                                <textarea type="text" id="chat-box"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    
                    <!-- Link Toolbar Item -->
                    <div id="toolbar-item-link" class="toolbar-item" title="Link">
                        <div class="toolbar-item-btn">
                            <span class="icon-link left-icon"></span>
                        </div>
                        <div class="toolbar-dropdown-left-border"></div>
                        <div class="toolbar-dropdown">
                            <div class="link-section-title">Editable Link (Collaborative)</div>
                            <input class="toolbar-input" id="collaborate-url" type="text" placeholder="Result"></input>
                            <div class="horizontal-divider"></div>
                            <div class="link-section-title">Readonly Link (Snapshot)</div>
                            <div id="snapshots">
                                <div id="placeholder">
                                    Use snapshot URLs for forum posts
                                </div>
                            </div>
                            <div class="horizontal-divider"></div>
                            <button class="share-button" id="snapshot-button">Create new snapshot</button>
                        </div>
                    </div>
                    <div class="divider"></div>
                    
                    <!-- Download Toolbar Item -->
                    <div id="toolbar-item-download" class="toolbar-item" title="Download">
                        <div class="toolbar-item-btn">
                            <span class="icon-download left-icon"></span>
                        </div>
                        <div class="toolbar-dropdown-left-border"></div>
                        <div class="toolbar-dropdown">
                            <input class="toolbar-input" type="text" id="download-as" placeholder="File name"></input>
                            <div class="horizontal-divider"></div>
                            <button id="download">Download</button>
                        </div>
                    </div>                                       
                    <div class="divider"></div>
                    
                    <!-- Fork Toolbar Item -->
                    <div id="toolbar-item-fork" class="toolbar-item" title="Fork">
                        <div class="toolbar-item-btn">
                            <span class="icon-code-fork left-icon"></span>
                        </div>
                        <div class="toolbar-dropdown-left-border"></div>
                        <div class="toolbar-dropdown">
                            <div id="fork-desc">
                                Forking a file creates an editable clone of the file.
                                Chat history will not be cloned, however.
                                The forked file will not link back to this one.
                            </div>
                            <div class="horizontal-divider"></div>
                            <form method="POST" action="/fork">
                                <input id="clone-doc-id" type="hidden" name="documentID" />
                                <button type="submit">Created Fork</button>
                            </form>
                        </div>
                    </div>
                    <div class="divider"></div>
                </div>
                <div id="html-tools">
                   
                    <!-- Template -->
                    <div id="toolbar-item-template" class="toolbar-item">
                        <div class="toolbar-item-btn">
                            <span class="toolbar-item-label">Insert Template</span>
                            <!--<span class="toolbar-item-value">HTML 5</span>-->
                            <span class="icon-angle-down"></span>
                        </div>
                        <div class="toolbar-dropdown-top-border"></div>
                        <div class="toolbar-dropdown">
                            <table id="template-options">
                                <tr>
                                    <td>
                                        Doctype
                                    </td>
                                    <td>
                                        <select id="doctype"></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Style Language
                                    </td>
                                    <td>
                                        <select id="style-language"></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Script Language
                                    </td>
                                    <td>
                                        <select id="script-language"></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Script Framework
                                    </td>
                                    <td>
                                        <select id="script-framework"></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td>
                                        <select id="framework-version"></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Auto Insert
                                        <span id="auto-insert-help" class="icon-help"></span>
                                    </td>
                                    <td>
                                        <select id="auto-insert" disabled="disabled">
                                            <option>No</option>
                                            <option>Yes</option>
                                        </select>
                                    </td>
                                </tr>
                            </table>
                            <div class="horizontal-divider"></div>
                            <button id="insert-template">Insert Template</button>
                        </div>
                    </div>                    
                    
                    <div id="tools-content-right">                        
                    </div>
                </div>
                <div id="edit-wrap">
                    <div id="edit"></div>
                    <div id="edit-status-bar">
                        <div class="ace_gutter"></div>
                        <div class="status-item menu-btn" id="indent-mode">
                            <span class="status-label">Indent Mode:</span>
                            <span class="status-value">Soft</span>
                            <span class="icon-sort"></span>
                            <div class="status-item-options">
                                <div class="status-item-option">Hard</div>
                                <div class="status-item-option">Soft</div>
                            </div>
                        </div>
                        <div class="status-item menu-btn"  onclick="alert('Changing the indent size is not implemented yet.')">
                            <span class="status-label">Indent Size:</span>
                            <span class="status-value">4</span>
                            <span class="icon-sort"></span>
                        </div>
                        <div class="status-item menu-btn"  onclick="alert('Showing invisibles is not implemented yet.')">
                            <span class="status-label">Show Invisibles:</span>
                            <span class="status-value">No</span>
                            <span class="icon-sort"></span>
                        </div>
                        <div class="status-item menu-btn"  onclick="alert('Changing the wrap settings is not implemented yet.')">
                            <span class="status-label">Word Wrap:</span>
                            <span class="status-value">Never</span>
                            <span class="icon-sort"></span>
                        </div>
                        <div class="status-right">
                            <div class="status-item" id="cursor-pos">
                                <span class="status-label">Ln:</span>
                                <span class="status-value" id="line-num">1</span>
                                &nbsp;
                                <span class="status-label">Col:</span>
                                <span class="status-value" id="col-num">1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="shortcut-overlay"></div>
        
        <script type="text/javascript">
            if (IS_SNAPSHOT)
            {
                document.getElementById('toolbar-item-chat').className  += ' disabled';
                document.getElementById('toolbar-item-link').className  += ' disabled';
                document.getElementById('title-input').disabled  = 'disabled';
                document.getElementById('title-save').disabled   = 'disabled';
            }
        </script>
        
        <!--START_DEV_ONLY-->
        <script type="text/javascript" src="/javascripts/lib/require.js"></script>
        <script type="text/javascript" src="/javascripts/require-config.js"></script>
        <!--END_DEV_ONLY-->
        
        <script type="text/javascript" src="/javascripts/init-app.js"></script>
        <script type="text/javascript" src="/javascripts/workspace.js"></script>
    </body>
</html>

