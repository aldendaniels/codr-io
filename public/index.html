<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Codr</title>
        <link rel=StyleSheet href="/stylesheets/index.css" type="text/css" />
        <link rel=StyleSheet href="/stylesheets/menu.css" type="text/css" />
        <link rel=StyleSheet href="/fontello/css/fontello.css" type="text/css" />
        
        <link href='http://fonts.googleapis.com/css?family=Sanchez' rel='stylesheet' type='text/css'>
    </head>
    <body>
        
        <script type="text/javascript">
            var IS_NEW_DOCUMENT = window.location.pathname === '/';
            var IS_SNAPSHOT = /^\/v/.test(window.location.pathname);
            if (IS_NEW_DOCUMENT) // New document.
                document.body.className = "home";
            if (IS_SNAPSHOT)
                document.body.className += " snapshot"
        </script>
        
        <div id="home">
            <div id="home-content">
                <h3 class="logo">codr<span class="io">.io</span></h3>
                <div id="modes"></div>
            </div>
        </div>
        
        <div id="workspace" class="">
            
            <div id="snapshot-notify-bar">
                <div>This file is readonly. You can fork this file to create an editable copy.</div>
            </div>

            <div id="workspace-main">
                
                <div id="toolbar-top">
                    
                    <a id="toolbar-logo" href="http://codr.io/">
                        <i class="icon-cloud left-icon"></i>
                        <i class="icon-code left-icon"></i>
                    </a>
                    <div class="divider"></div>
                    
                    <div id="title-shortcut-wrapper">
                        <div id="title" class="toolbar-item">
                            <div class="toolbar-item-btn">
                                <div class="toolbar-item-caption">Title</div>
                                <div class="toolbar-item-selection">Loading...</div>
                            </div>
                            <div class="toolbar-dropdown-top-border"></div>
                            <div class="toolbar-dropdown">
                                <div id="title-message" class="edit-mode-message">
                                    Changes not allowed in read-only files
                                </div>
                                <input class="toolbar-input" type="text" id="title-input"></input>
                                <div class="horizontal-divider"></div>
                                <button id="title-save">Save</button>
                                <div class="hidden-focusable">
                                    <a href="javascript:void(0)">#</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    
                    <div id="mode-shortcut-wrapper">
                        <div id="mode" class="toolbar-item">
                            <div class="toolbar-item-btn">
                                <div class="toolbar-item-caption">Language</div>
                                <div class="toolbar-item-selection">Loading...</div>
                            </div>
                            <div class="toolbar-dropdown-top-border"></div>
                            <div class="toolbar-dropdown">
                                <div id="mode-message" class="edit-mode-message">
                                    Changes not allowed in read-only files
                                </div>
                                <div id="mode-menu"></div>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    
                    <div id="toolbar-content-right">
                        <div class="divider"></div>
                        <div id="num-viewing-box">
                            <div id="num-viewing-caption" class="toolbar-item-caption">Viewing</div>
                            <div class="horizontal-divider"></div>
                            <div id="num-viewing"></div>
                        </div>
                    </div>
                </div>
                <div id="toolbar-left">
                    
                    <!-- Chat Menu -->
                    <div id="chat-menu-shortcut-wrapper">
                        <div id="chat-menu" class="toolbar-item" title="Chat">
                            <div class="toolbar-item-btn">
                                <i class="icon-chat left-icon"></i>
                                <div id="chat-unread-count" style="display: none;"></div>
                            </div>
                            <div class="toolbar-dropdown-left-border"></div>
                            <div class="toolbar-dropdown identify" id="chat">
                                <div id="chat-identify-wrapper">
                                    Please Identify Yourself:
                                    <input class="toolbar-input" type="text" id="chat-identify" />
                                    <button id="chat-identify-ok-button">OK, Enter Chat</button>
                                    <div id="chat-identify-error-message"></div>
                                </div>
                                <div id="chat-main">
                                    <div id="chat-history" class="selectable" tabindex="1"></div>
                                    <div id="chat-typing">
                                        <b>Typing: </b><span id="chat-typing-names"></span>
                                    </div>
                                    <textarea type="text" id="chat-box"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>

                    <!-- Link Menu -->
                    <div id="link-menu-shortcut-wrapper">
                        <div id="link-menu" class="toolbar-item" title="Link">
                            <div class="toolbar-item-btn">
                                <i class="icon-link left-icon"></i>
                            </div>
                            <div class="toolbar-dropdown-left-border"></div>
                            <div class="toolbar-dropdown">
                                <div class="link-section-title">Editable Link (Collaborative)</div>
                                <input class="toolbar-input" id="collaborate-url" type="text" placeholder="Result"></input>
                                <div class="horizontal-divider"></div>
                                <div class="link-section-title">Readonly Link (Snapshot)</div>
                                <div id="snapshots">
                                    <div id="placeholder">
                                        Use snapshot URLs for forum posts
                                    </div>
                                </div>
                                <div class="horizontal-divider"></div>
                                <button class="share-button" id="snapshot-button">Create new snapshot</button>
                            </div>
                        </div>
                    </div>

                    
                    <!-- Download Menu -->
                    <div class="divider"></div>
                    <div id="download-menu-shortcut-wrapper">
                        <div id="download-menu" class="toolbar-item" title="Download">
                            <div class="toolbar-item-btn">
                                <i class="icon-down-circled2 left-icon"></i>
                            </div>
                            <div class="toolbar-dropdown-left-border"></div>
                            <div class="toolbar-dropdown">
                                <input class="toolbar-input" type="text" id="download-as" placeholder="File name"></input>
                                <div class="horizontal-divider"></div>
                                <button id="download">Download</button>
                            </div>
                        </div>
                    </div>
                                       
                    <div class="divider"></div>
                    <div id="fork-menu-shortcut-wrapper">
                        <div id="fork-menu" class="toolbar-item" title="Fork">
                            <div class="toolbar-item-btn">
                                <i class="icon-split left-icon"></i>
                            </div>
                            <div class="toolbar-dropdown-left-border"></div>
                            <div class="toolbar-dropdown">
                                <div id="fork-desc">
                                    Forking a file creates an editable clone of the file.
                                    Chat history will not be cloned, however.
                                    The forked file will not link back to this one.
                                </div>
                                <div class="horizontal-divider"></div>
                                <form method="POST" action="/fork">
                                    <input id="clone-doc-id" type="hidden" name="documentID" />
                                    <button type="submit">Created Fork</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div id="toolbar-content-bottom">
                        <div class="divider"></div>
                        <div id="settings-menu-shortcut-wrapper">
                            <div class="toolbar-item" title="Settings">
                                <div class="toolbar-item-btn">
                                    <i class="icon-cog-alt left-icon"></i>
                                </div>
                                <div class="toolbar-dropdown-left-border"></div>
                                <div class="toolbar-dropdown">
                                    <table id="settings">
                                        <tr>
                                            <td class="setting-label">Tab Style:</td>
                                            <td class="setting-choice">
                                                <select>
                                                    <option>Hard</option>
                                                    <option>Soft</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="setting-label">Tab Width:</td>
                                            <td class="setting-choice">
                                                <select>
                                                    <option>2</option>
                                                    <option>3</option>
                                                    <option>4</option>
                                                    <option>6</option>
                                                    <option>8</option>
                                                </select>
                                            </td>
                                        </tr>                                </table>
                                        <tr>
                                            <td class="setting-label">Theme</td>
                                            <td class="setting-choice">
                                                <select>
                                                    <option>Light</option>
                                                    <option>Dark</option>
                                                </select>
                                            </td>
                                        </tr>
                                     </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="edit"></div>
            </div>
        </div>
        
        <div id="shortcut-overlay">
        </div>

        <script type="text/javascript">
            if (IS_SNAPSHOT)
            {
                document.getElementById('chat-menu').className  += ' disabled';
                document.getElementById('link-menu').className  += ' disabled';
                document.getElementById('mode-menu').className  += ' disabled';
                document.getElementById('title-input').disabled  = 'disabled';
                document.getElementById('title-save').disabled   = 'disabled';
            }
        </script>
        
        <!-- Load menu chooser -->
        <script type="text/javascript" src="/javascripts/helpers/jquery-2.0.2.min.js"></script>
        <script type="text/javascript" src="/javascripts/helpers/helpers.js"></script>
        <script type="text/javascript" src="/javascripts/helpers/keyable.js"></script>
        <script type="text/javascript" src="/javascripts/helpers/menu.js"></script>
        <script type="text/javascript" src="/javascripts/edit-control/mode-list.js"></script>
        <script type="text/javascript" src="/javascripts/helpers/websocket.js"></script>
        <script type="text/javascript" src="/javascripts/init-app.js"></script>
        <script type="text/javascript">
            if (IS_NEW_DOCUMENT)
            {
                oInitApp.initModeChooser();
            }
        </script>
        
        <!-- Load workspace -->
        <script type="text/javascript" src="/javascripts/edit-control/ace/ace.js"></script>
        <script type="text/javascript" src="/javascripts/edit-control/edit-control.js"></script>
        <script type="text/javascript" src="/javascripts/editor.js"></script>
        <script type="text/javascript" src="/javascripts/helpers/jquery-selectors.js"></script>
        <script type="text/javascript" src="/javascripts/OT.js"></script>
        <script type="text/javascript" src="/javascripts/shortcut.js"></script>
        <script type="text/javascript" src="/javascripts/chat.js"></script>
        <script type="text/javascript" src="/javascripts/toolbar.js"></script>
        <script type="text/javascript" src="/javascripts/workspace.js"></script>
        <script type="text/javascript">
            if (!IS_NEW_DOCUMENT) /* A new document connects on mode choice*/
            {
                oInitApp.initWorkspace();

                if (IS_SNAPSHOT)
                    oInitApp.getSnapshotData();                    
            }
        </script>
        
    </body>
</html>

